<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="utf-8">
    <title>Waybill <%= order.job_no %>
    </title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.4/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background: #f3f4f6;
            color: black;
        }

        @media print {
            body {
                -webkit-print-color-adjust: exact;
                background: white;
            }

            .no-print {
                display: none;
            }

            .page-break {
                page-break-after: always;
            }
        }

        .label-page {
            width: 100mm;
            min-height: 150mm;
            /* A6 size roughly */
            margin: 0 auto;
            padding: 5mm;
            background: white;
            border: 1px solid #ddd;
        }

        @media print {
            .label-page {
                border: none;
                width: 100%;
                height: 100%;
            }
        }

        .barcode-bar {
            height: 40px;
            background: repeating-linear-gradient(90deg, black 0, black 2px, white 2px, white 4px);
            width: 80%;
            margin: 10px auto;
        }
    </style>
</head>

<body class="flex items-center justify-center min-h-screen p-8 print:p-0 print:block">

    <div class="fixed top-4 right-4 no-print flex flex-col gap-2">
        <button onclick="window.print()"
            class="bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 font-bold flex items-center gap-2">
            <i class="fa-solid fa-print"></i> Print Label
        </button>
        <button onclick="window.close()" class="bg-gray-500 text-white px-4 py-2 rounded shadow hover:bg-gray-600">
            Close
        </button>
    </div>

    <div class="label-page shadow-lg print:shadow-none flex flex-col">
        <!-- Header -->
        <div class="border-b-2 border-black pb-2 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-10 h-10 bg-black text-white flex items-center justify-center font-bold text-xl rounded">S
                </div>
                <div class="font-bold leading-tight uppercase">SNG Logistics<br><span
                        class="text-xs font-normal text-gray-600">Thailand - Laos</span></div>
            </div>
            <div class="text-right">
                <h1 class="font-bold text-2xl">
                    <%= order.direction==='TH_TO_LA' ? 'TH üáπüá≠' : 'LA üá±üá¶' %>
                </h1>
                <p class="text-xs text-gray-500">
                    <%= new Date(order.created_at).toLocaleDateString('th-TH') %>
                </p>
            </div>
        </div>

        <!-- Job No & Barcode -->
        <div class="text-center py-4 border-b-2 border-dashed border-gray-300">
            <h2 class="text-3xl font-black tracking-widest font-mono">
                <%= order.job_no %>
            </h2>
            <div class="barcode-bar"></div>
            <p class="text-xs text-gray-400">SCAN FOR TRACKING</p>
        </div>

        <!-- Receiver (Big) -->
        <div class="p-4 border-b-2 border-black bg-gray-50 print:bg-gray-50">
            <span class="text-xs uppercase text-gray-500 font-bold block mb-1">TO (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö)</span>
            <div class="text-xl font-bold">
                <%= order.receiver_name || 'N/A' %>
            </div>
            <div class="text-sm mt-1 leading-relaxed">
                <%= order.receiver_address || '-' %>
            </div>
            <div class="mt-2 text-lg font-bold"><i class="fa-solid fa-phone text-xs mr-1"></i>
                <%= order.receiver_phone || '-' %>
            </div>
        </div>

        <!-- Sender (Small) -->
        <div class="p-3 border-b border-gray-300 text-sm">
            <span class="text-xs uppercase text-gray-500 font-bold block mb-1">FROM (‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á)</span>
            <div class="font-semibold">
                <%= order.sender_name || 'N/A' %>
            </div>
            <div class="text-xs text-gray-500">
                <%= order.sender_phone || '-' %>
            </div>
        </div>

        <!-- COD & Info -->
        <div class="grid grid-cols-2 text-center border-b-2 border-black text-sm">
            <div class="p-3 border-r border-black">
                <span class="block text-xs text-gray-500 uppercase">Service</span>
                <span class="font-bold uppercase">
                    <%= order.service_type || 'General' %>
                </span>
            </div>
            <div class="p-3">
                <span class="block text-xs text-gray-500 uppercase">Weight</span>
                <span class="font-bold">
                    <%= order.actual_weight || order.declared_weight || '-' %> kg
                </span>
            </div>
        </div>

        <div class="flex-grow flex flex-col justify-center items-center py-6">
            <% if (order.cod_amount> 0) { %>
                <div class="bg-black text-white p-4 w-full text-center print:bg-black print:text-white">
                    <p class="text-sm opacity-80 mb-1">CASH ON DELIVERY (‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)</p>
                    <p class="text-4xl font-black">‡∏ø<%= Number(order.cod_amount).toLocaleString() %>
                    </p>
                </div>
                <% } else { %>
                    <div class="border-2 border-black border-dashed p-4 w-full text-center text-gray-400">
                        <p class="font-bold text-xl text-black">PAID / NO COD</p>
                        <p class="text-xs">‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</p>
                    </div>
                    <% } %>
        </div>

        <!-- Footer -->
        <div class="text-center text-[10px] text-gray-400 mt-2">
            <p>SNG Logistics Company Limited (Thailand-Laos Border Service)</p>
            <p>www.sng-logistics.com | Line: @snglogistics</p>
        </div>
    </div>

</body>

</html>