<!-- Sidebar Component -->
<aside class="sidebar" id="sidebar">
    <!-- Brand -->
    <div class="sidebar-brand">
        <a href="/dashboard" class="flex items-center gap-3">
            <img src="/images/snglogo.png" alt="SNG" class="w-10 h-10 rounded-lg object-contain" />
            <div>
                <div class="text-white font-bold text-lg">SNG <span class="text-cyan-400">Logistics</span></div>
                <div class="text-[10px] text-slate-500 uppercase tracking-widest">ไทย → ลาว</div>
            </div>
        </a>
    </div>
    <!-- Navigation -->
    <nav class="sidebar-nav">
        <div class="sidebar-section-title">เมนูหลัก</div>
        <a href="/dashboard"
            class="sidebar-link <%= (typeof title !== 'undefined' && title.includes('ภาพรวม')) ? 'active' : '' %>"><i
                class="fa-solid fa-chart-pie"></i> <span>แดชบอร์ด</span></a>
        <a href="/orders"
            class="sidebar-link <%= (typeof title !== 'undefined' && title.includes('ออเดอร์')) ? 'active' : '' %>"><i
                class="fa-solid fa-boxes-stacked"></i> <span>ออเดอร์ขนส่ง</span></a>
        <a href="/orders/scan" class="sidebar-link"><i class="fa-solid fa-qrcode"></i> <span>สถานะพัสดุ</span></a>
        <a href="/trips"
            class="sidebar-link <%= (typeof title !== 'undefined' && title.includes('รอบรถ')) ? 'active' : '' %>"><i
                class="fa-solid fa-truck-fast"></i> <span>เที่ยวรถ</span></a>
        <div class="sidebar-section-title">การเงิน</div>
        <a href="/cod"
            class="sidebar-link <%= (typeof title !== 'undefined' && title.includes('การเงิน')) ? 'active' : '' %>"><i
                class="fa-solid fa-wallet"></i> <span>รายรับ–ต้นทุน</span></a>
        <div class="sidebar-section-title">จัดการ</div>
        <a href="/customers"
            class="sidebar-link <%= (typeof title !== 'undefined' && title.includes('ลูกค้า')) ? 'active' : '' %>"><i
                class="fa-solid fa-users"></i> <span>ลูกค้า</span></a>
        <% if (currentUser && currentUser.role==='admin' ) { %>
            <a href="/users" class="sidebar-link"><i class="fa-solid fa-user-tie"></i> <span>คนขับ–พนักงาน</span></a>
            <% } %>
                <div class="sidebar-section-title">ระบบ</div>
                <a href="#" class="sidebar-link"><i class="fa-solid fa-chart-bar"></i> <span>รายงาน</span></a>
                <% if (currentUser && currentUser.role==='admin' ) { %>
                    <a href="/settings/rates" class="sidebar-link"><i class="fa-solid fa-gear"></i>
                        <span>ตั้งค่าระบบ</span></a>
                    <% } %>
    </nav>
    <!-- User Info (Bottom) -->
    <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-white/5">
        <div class="flex items-center gap-3">
            <img src="/images/avatar.png" alt="User" class="w-10 h-10 rounded-full" />
            <div>
                <p class="text-white font-medium">
                    <%= currentUser?.name || 'ผู้ใช้' %>
                </p>
                <p class="text-xs text-slate-400">
                    <%= currentUser?.role || '' %>
                </p>
            </div>
            <form action="/logout" method="post" class="flex-shrink-0 ml-auto">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <button
                    class="w-8 h-8 rounded-lg hover:bg-red-500/20 text-slate-400 hover:text-red-400 transition-all flex items-center justify-center"
                    title="ออกจากระบบ">
                    <i class="fa-solid fa-power-off text-sm"></i>
                </button>
            </form>
        </div>
    </div>
</aside>