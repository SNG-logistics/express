<!-- Dashboard Content -->
<div class="space-y-6">

  <!-- Page Header -->
  <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
    <div>
      <h2 class="text-3xl md:text-4xl font-bold text-white">
        ภาพรวม<span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">วันนี้</span>
      </h2>
      <p class="text-slate-400 text-sm mt-1">
        <i class="fa-regular fa-calendar mr-1"></i>
        <%= new Date().toLocaleDateString('th-TH', { weekday: 'long' , year: 'numeric' , month: 'long' , day: 'numeric'
          }) %>
      </p>
    </div>
    <div class="flex gap-3">
      <a href="/scanner"
        class="flex items-center gap-2 px-4 py-2.5 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-white/10 transition-all">
        <i class="fa-solid fa-qrcode"></i>
        <span class="hidden sm:inline">สแกนพัสดุ</span>
      </a>
      <a href="/orders/new"
        class="flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-xl hover:shadow-lg hover:shadow-cyan-500/30 transition-all">
        <i class="fa-solid fa-plus"></i>
        <span class="hidden sm:inline">สร้างออเดอร์</span>
      </a>
    </div>
  </div>

  <!-- KPI Cards - 5 Cards -->
  <% /* KPI Cards */ %>
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
      <%- include('../components/kpi-card', {iconClass:'fa-solid fa-box', bgColorClass:'blue', label:'ออเดอร์วันนี้',
        value:kpi.todayOrders || 0, changeBadge:'+12%'}) %>
        <%- include('../components/kpi-card', {iconClass:'fa-solid fa-truck-fast', bgColorClass:'orange',
          label:'กำลังขนส่ง', value:kpi.inTransit || 0, changeBadge:''}) %>
          <%- include('../components/kpi-card', {iconClass:'fa-solid fa-circle-check', bgColorClass:'green',
            label:'ถึงปลายทาง', value:kpi.delivered || 0, changeBadge:''}) %>
            <%- include('../components/kpi-card', {iconClass:'fa-solid fa-coins', bgColorClass:'purple',
              label:'รายได้วันนี้', value:'฿' + Number(kpi.todayRevenue || 0).toLocaleString(), changeBadge:''}) %>
              <%- include('../components/kpi-card', {iconClass:'fa-solid fa-chart-line', bgColorClass:'emerald',
                label:'กำไรวันนี้', value:'฿' + Number(kpi.todayProfit || 0).toLocaleString(), changeBadge:''}) %>
    </div>

    <!-- KPI Cards End -->
</div>

<!-- Status Quick Filters -->
<div class="glass-panel-dark p-4">
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-white font-semibold flex items-center gap-2">
      <i class="fa-solid fa-filter text-cyan-400"></i>
      กรองตามสถานะ
    </h3>
    <button class="text-xs text-slate-400 hover:text-white transition-colors" onclick="clearFilters()">
      <i class="fa-solid fa-rotate-left mr-1"></i> รีเซ็ต
    </button>
  </div>
  <% const statuses=[ {status: 'new' , label: 'ใหม่' }, {status: 'received' , label: 'รับของ' }, {status: 'crossing' ,
    label: 'ข้ามแดน' }, {status: 'warehouse' , label: 'ถึงคลัง' }, {status: 'delivery' , label: 'ออกส่ง' },
    {status: 'completed' , label: 'สำเร็จ' } ]; %>
    <div class="flex flex-wrap gap-2">
      <% statuses.forEach(s=> { %>
        <%- include('../components/status-badge', {status: s.status, label: s.label}) %>
          <% }) %>
    </div>
    <!-- Status Filters End -->
</div>
</div>

<!-- Chart and Recent Orders Grid -->
<div class="grid grid-cols-1 xl:grid-cols-3 gap-6">

  <!-- Chart Section -->
  <%- include('../components/chart') %>
</div>

<!-- Quick Stats -->
<div class="glass-panel-dark p-6">
  <h3 class="text-white font-semibold flex items-center gap-2 mb-6">
    <i class="fa-solid fa-bolt text-amber-400"></i>
    สรุปด่วน
  </h3>
  <div class="space-y-4">
    <div class="flex items-center justify-between p-3 bg-white/5 rounded-xl">
      <span class="text-slate-400 text-sm">ออเดอร์ทั้งหมด</span>
      <span class="text-white font-bold">
        <%= kpi.totalOrders || 0 %>
      </span>
    </div>
    <div class="flex items-center justify-between p-3 bg-white/5 rounded-xl">
      <span class="text-slate-400 text-sm">รายได้เดือนนี้</span>
      <span class="text-purple-400 font-bold">฿<%= Number(kpi.monthlyRevenue || 0).toLocaleString() %></span>
    </div>
    <div class="flex items-center justify-between p-3 bg-white/5 rounded-xl">
      <span class="text-slate-400 text-sm">ลูกค้าทั้งหมด</span>
      <span class="text-cyan-400 font-bold">
        <%= kpi.totalCustomers || 0 %>
      </span>
    </div>
    <div class="flex items-center justify-between p-3 bg-white/5 rounded-xl">
      <span class="text-slate-400 text-sm">อัตราความสำเร็จ</span>
      <span class="text-green-400 font-bold">98.5%</span>
    </div>
    <div class="flex items-center justify-between p-3 bg-white/5 rounded-xl">
      <span class="text-slate-400 text-sm">COD รอเก็บ</span>
      <span class="text-amber-400 font-bold">฿<%= Number(kpi.pendingCOD || 0).toLocaleString() %></span>
    </div>
  </div>
</div>
</div>

<%- include('../components/order-table') %>